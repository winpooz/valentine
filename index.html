<!DOCTYPE html>
<html>
<head>
<title>Cute Pixel Proposal Game ðŸ’–</title>
<style>
body {
  margin: 0;
  background: #87CEEB;
  overflow: hidden;
  font-family: pixelated;
}

canvas {
  display: block;
}

button {
  position: absolute;
  padding: 15px 25px;
  font-size: 20px;
  background: pink;
  border: 3px solid white;
  border-radius: 10px;
  cursor: pointer;
  font-weight: bold;
}

#startScreen {
  position: fixed;
  width: 100%;
  height: 100%;
  background: #87CEEB;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 10;
}

#playBtn {
  font-size: 28px;
  padding: 20px 40px;
}
</style>
</head>
<body>

<div id="startScreen">
  <h1>ðŸŽ® Pixel Love Game</h1>
  <button id="playBtn">Play Game</button>
</div>

<canvas id="game"></canvas>

<button id="yesBtn" style="display:none;">YES ðŸ’•</button>
<button id="noBtn" style="display:none;">NO ðŸ˜­</button>

<audio id="xpSound" src="xp.mp3"></audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const girl = new Image();
girl.src = "girl.png";

let player = { x: 50, y: canvas.height - 200, frame: 0, walking: false };
let clouds = [];
let petals = [];
let showQuestion = false;
let gameStarted = false;

// SUN
function drawSun() {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(canvas.width - 120, 120, 50, 0, Math.PI*2);
  ctx.fill();
}

// CLOUDS
for(let i=0;i<5;i++){
  clouds.push({x:Math.random()*canvas.width,y:50+Math.random()*200});
}

function drawClouds() {
  ctx.fillStyle = "white";
  clouds.forEach(c=>{
    ctx.beginPath();
    ctx.arc(c.x, c.y, 30, 0, Math.PI*2);
    ctx.arc(c.x+30, c.y+10, 25, 0, Math.PI*2);
    ctx.arc(c.x-30, c.y+10, 25, 0, Math.PI*2);
    ctx.fill();
    c.x += 0.2;
    if(c.x > canvas.width+50) c.x = -50;
  });
}

// SAKURA PETALS
for(let i=0;i<100;i++){
  petals.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,speed:1+Math.random()*2});
}

function drawPetals(){
  ctx.fillStyle="pink";
  petals.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,3,0,Math.PI*2);
    ctx.fill();
    p.y += p.speed;
    p.x += Math.sin(p.y*0.01);
    if(p.y>canvas.height){p.y=0;}
  });
}

// PLAYER WALK ANIMATION
function drawPlayer(){
  let frameX = player.frame * 64;
  ctx.drawImage(girl, frameX, 0, 64, 64, player.x, player.y, 128, 128);
}

document.addEventListener("keydown", e=>{
  if(e.key==="d"){
    player.x += 5;
    player.walking = true;
    player.frame = (player.frame+1)%4;
  }
});

// QUESTION AREA
function drawQuestion(){
  if(player.x > canvas.width/2 - 100){
    showQuestion = true;
    document.getElementById("yesBtn").style.display="block";
    document.getElementById("noBtn").style.display="block";
    yesBtn.style.left = canvas.width/2 - 80 + "px";
    yesBtn.style.top = canvas.height/2 + 50 + "px";
    noBtn.style.left = canvas.width/2 + 20 + "px";
    noBtn.style.top = canvas.height/2 + 50 + "px";
  }

  if(showQuestion){
    ctx.fillStyle="white";
    ctx.font="40px Arial";
    ctx.fillText("Will you go out with me? ðŸ’–", canvas.width/2 - 250, canvas.height/2);
  }
}

// CONFETTI + FIREWORKS
function fireworks(){
  for(let i=0;i<300;i++){
    let x = canvas.width/2;
    let y = canvas.height/2;
    let angle = Math.random()*Math.PI*2;
    let speed = Math.random()*8;
    let life = 100;

    let interval = setInterval(()=>{
      ctx.fillStyle = `hsl(${Math.random()*360},100%,50%)`;
      x += Math.cos(angle)*speed;
      y += Math.sin(angle)*speed;
      ctx.fillRect(x,y,4,4);
      life--;
      if(life<=0) clearInterval(interval);
    },20);
  }
}

// BUTTONS
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");

yesBtn.onclick = ()=>{
  document.getElementById("xpSound").play();
  fireworks();
  alert("SHE SAID YES!!! ðŸ’•ðŸŽ†");
};

noBtn.onmouseover = ()=>{
  noBtn.style.left = Math.random()*canvas.width + "px";
  noBtn.style.top = Math.random()*canvas.height + "px";
};

// GAME LOOP
function loop(){
  if(!gameStarted) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawSun();
  drawClouds();
  drawPetals();
  drawPlayer();
  drawQuestion();
  requestAnimationFrame(loop);
}

// START MENU
document.getElementById("playBtn").onclick = ()=>{
  document.getElementById("startScreen").style.display="none";
  gameStarted = true;
  loop();
};
</script>
</body>
</html>
